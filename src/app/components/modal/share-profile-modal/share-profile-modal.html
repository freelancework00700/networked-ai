<div class="inner-content w-full px-4 max-w-[672px] mx-auto">
  @if (user) {
    <!-- Business Card Display -->
    <div class="relative w-full mt-6">
      <!-- Background with gradient and pattern -->
      <div class="relative w-full min-h-[500px] rounded-4xl overflow-hidden bg-neutral-06">
        <!-- Background Image -->
        <img
          src="/assets/images/business-card-bg.png"
          alt="Business Card Background"
          class="absolute inset-0 w-full object-cover opacity-90 h-[160px]"
        />

        <!-- Card Content Overlay -->
        <div class="relative flex flex-col items-center justify-center p-6 min-h-[500px] z-10 gap-5 pt-[120px]">
          <!-- Downloadable Section -->
          <!-- White Card -->
          <div class="relative w-full bg-white rounded-4xl! p-6 gradient-bg" #downloadableSection>
            <!-- Profile Image -->
            <div class="flex justify-center mb-4">
              <div class="w-[72px] min-w-[72px] h-[72px] rounded-full overflow-hidden relative">
                @if (profileImage()) {
                  <img
                    placeholder
                    fill
                    [ngSrc]="getImageUrl(profileImage())"
                    [alt]="user.name || 'Profile'"
                    (error)="onImageError($event)"
                    class="object-cover rounded-full"
                  />
                } @else {
                  <div class="w-full h-full flex items-center justify-center bg-neutral-05">
                    <ion-icon name="person-outline" class="text-[48px] neutral-03"></ion-icon>
                  </div>
                }
              </div>
            </div>

            <!-- Name -->
            <div class="text-center mb-1">
              <h2 class="body-18SB neutral-01">{{ user.name || 'Name' }}</h2>
            </div>

            <!-- Location -->
            @if (location()) {
              <div class="text-center mb-1">
                <div class="flex items-center justify-center gap-1">
                  <ion-icon name="location-outline" class="text-[14px] neutral-03"></ion-icon>
                  <p class="body-12R neutral-03">{{ location() }}</p>
                </div>
              </div>
            }

            <!-- Username -->
            @if (user.username) {
              <div class="text-center mb-4">
                <p class="body-12R neutral-03">{{ user.username }}</p>
              </div>
            }

            <!-- QR Code -->
            <div class="flex justify-center">
              <div class="bg-white p-2 rounded-2xl border border-neutral-200 gradient-border flex items-center justify-center">
                <qr-code [value]="user.username" [size]="128" errorCorrectionLevel="M"></qr-code>
              </div>
            </div>
          </div>
          <!-- Profile Link -->
          <div class="flex items-center gap-3 p-4 border border-neutral-300 rounded-4xl bg-neutral-07 w-full">
            <ion-icon name="link-outline" class="text-[20px] neutral-03 flex-shrink-0"></ion-icon>
            <div class="flex-1 body-14M neutral-01 truncate min-w-0">
              {{ profileLink() }}
            </div>
            <button type="button" class="flex-shrink-0 cursor-pointer" (click)="copyLink()">
              <ion-icon name="copy-outline" class="text-[20px] neutral-03"></ion-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  }
</div>

<ion-footer mode="md">
  <ion-toolbar mode="md">
    <div class="w-full px-4 py-4 max-w-[672px] mx-auto">
      <!-- Download Button -->
      <div class="">
        <app-button
          color="primary"
          label="Download"
          iconName="pi-download"
          (click)="downloadProfile()"
          [isLoading]="isDownloading()"
          class="w-full"
        />
      </div>

      <!-- Share Options -->
      <div class="share-options-container">
        <div class="share-options-scroll">
          <button type="button" class="share-option-item" (click)="onContact()">
            <div class="share-option-icon">
              <ion-icon name="person-add-outline" class="text-[24px] neutral-03"></ion-icon>
            </div>
            <span class="body-12R neutral-03">Contact</span>
          </button>
          <button type="button" class="share-option-item" (click)="onShareTo()">
            <div class="share-option-icon">
              <ion-icon name="share-outline" class="text-[24px] neutral-03"></ion-icon>
            </div>
            <span class="body-12R neutral-03">Share to</span>
          </button>
          <button type="button" class="share-option-item" (click)="onChat()">
            <div class="share-option-icon">
              <ion-icon name="chatbubble-outline" class="text-[24px] neutral-03"></ion-icon>
            </div>
            <span class="body-12R neutral-03">Chat</span>
          </button>
          <button type="button" class="share-option-item" (click)="onStory()">
            <div class="share-option-icon">
              <ion-icon name="logo-instagram" class="text-[24px] neutral-03"></ion-icon>
            </div>
            <span class="body-12R neutral-03">Threads</span>
          </button>
        </div>
      </div>
    </div>
  </ion-toolbar>
</ion-footer>

<div class="inner-content" [class.p-4]="isModalMode">
  @if (isNative && isApplePayAvailable() && clientSecret()) {
    <!-- Apple Pay Button -->
    <div class="apple-pay-container" [class.disabled]="isProcessingPayment() || !clientSecret()" (click)="nativeApplePay()">
      <div class="apple-pay-pill">
        <ion-icon name="logo-apple"></ion-icon>
        <span>Pay</span>
      </div>

      <div class="body-16SB">Apple Pay</div>
    </div>

    <!-- Divider -->
    <div class="flex items-center gap-3 my-2">
      <div class="flex-1 border-t border-surface-300"></div>
      <div class="text-surface-500 body-14M">Or pay with a card</div>
      <div class="flex-1 border-t border-surface-300"></div>
    </div>
  }

  @if (clientSecret() && elementsOptions()) {
    <div class="flex flex-col gap-2">
      <div class="stripe-payment-container">
        <ngx-stripe-elements [stripe]="stripe" [elementsOptions]="elementsOptions()!">
          <ngx-stripe-payment [options]="paymentElementOptions" />
        </ngx-stripe-elements>
      </div>

      @if (errorMessage()) {
        <div class="error-message body-12M text-red-600">
          {{ errorMessage() }}
        </div>
      }

      <!-- Payment Button - Only show when opened from subscription page -->
      @if (showButtons) {
        <div class="flex gap-2">
          <app-button label="Cancel" [disabled]="isProcessingPayment()" (click)="closeModal()" color="secondary" class="w-full" />
          <app-button
            label="Pay Now"
            [isLoading]="isProcessingPayment()"
            [disabled]="isProcessingPayment()"
            (click)="processPayment()"
            class="w-full"
          />
        </div>
      }
    </div>
  } @else if (isLoading()) {
    <div class="flex items-center justify-center py-4">
      <div class="body-14M neutral-03">Initializing payment...</div>
    </div>
  }
</div>

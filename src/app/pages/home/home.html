<ion-header>
  <ion-toolbar>
    <div class="flex justify-between px-4 py-2.5">
      <div class="flex items-center">Ethan Cortazzo <p-inputicon class="pi pi-angle-down neutral-02 !text-[16px] ml-1" /></div>
      <p-inputicon class="pi pi-bell neutral-02 !text-[18px]" />
    </div>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <div class="sticky -top-[1.5px] bg-neutral-07 z-50 Hardik">
    <ion-segment class="home-segment" mode="md" [value]="segmentValue" (ionChange)="onSegmentChange($event)">
      <ion-segment-button value="events">
        <div class="segment-item">
          <p-inputicon class="pi pi-calendar-clock segment-icon" />
          <span class="segment-text">Events</span>
        </div>
      </ion-segment-button>
      <ion-segment-button value="feed">
        <div class="segment-item">
          <p-inputicon class="pi pi-book segment-icon" />
          <span class="segment-text">My Feed</span>
        </div>
      </ion-segment-button>
    </ion-segment>
  </div>
  <ng-container *ngIf="segmentValue === 'events'; else feed">
    <div class="flex flex-col gap-6">
      <div class="px-4" *ngIf="eventFilter === 'browse' || 'upcoming'">
        <div
          class="mt-4 flex items-center justify-between rounded-[12px] border border-[#DBDBDB] bg-gradient-to-r from-[#fff7ee] to-[#fefaf3] px-4 py-3 shadow-[0_6px_18px_rgba(0,0,0,0.06)]"
        >
          <div class="flex items-center gap-3">
            <span class="text-[22px] leading-none">ðŸš€</span>
            <span class="body-16SB neutral-01">Host Your First Event!</span>
          </div>
          <div class="w-10 h-10 flex items-center justify-center rounded-[8px] bg-brand-04 neutral-01">
            <p-inputicon class="pi pi-arrow-right !text-[18px]" />
          </div>
        </div>
      </div>
      <div class="flex gap-2 px-4">
        <button
          type="button"
          class="flex-1 h-8 !rounded-full !border"
          (click)="setEventFilter('browse')"
          [ngClass]="
            eventFilter === 'browse'
              ? '!border-[#e1910e] bg-brand-07 brand-02 !body-14SB font-semibold'
              : '!border-[#d7d7d7] bg-neutral-07 neutral-03 !body-14M font-medium'
          "
        >
          Browse Events
        </button>
        <button
          type="button"
          class="flex-1 h-8 !rounded-full !border"
          (click)="setEventFilter('upcoming')"
          [ngClass]="
            eventFilter === 'upcoming'
              ? '!border-[#e1910e] bg-brand-07 brand-02 !body-14SB font-semibold'
              : '!border-[#d7d7d7] bg-neutral-07 neutral-03 !body-14M font-medium'
          "
        >
          My Upcoming Events
        </button>
      </div>
      <!-- Upcoming placeholder -->
      <div class="px-4" *ngIf="eventFilter === 'upcoming' && (!upcomingEvents || eventCards.length === 0)">
        <div class="mt-3 rounded-[16px] bg-neutral-06 py-8 flex flex-col items-center gap-4">
          <div
            class="rounded-[24px] bg-[radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.70)_0%,rgba(255,255,255,0.70)_100%)] shadow-[0_16px_32px_0_rgba(7,40,70,0.10)] flex items-center justify-center p-3"
          >
            <div
              class="w-14 h-14 rounded-[12px] bg-[linear-gradient(138deg,#ABABAB_8.51%,#545454_85.69%)] shadow-[0_12px_24px_rgba(9,70,103,0.30)] flex items-center justify-center"
            >
              <div class="w-10 h-10 rounded-[12px] bg-neutral-04/40 flex items-center justify-center">
                <ion-icon src="/assets/svg/no-event.svg" class="text-[24px]"></ion-icon>
              </div>
            </div>
          </div>
          <div class="flex flex-col items-center gap-2">
            <div class="heading-h3 neutral-01">No Upcoming Events</div>
            <div class="body-14M neutral-03 text-center">You havenâ€™t registered for any events.</div>
          </div>
          <button
            type="button"
            class="!h-[40px] !px-6 !rounded-[8px] bg-brand-04 neutral-01 body-14SB flex items-center justify-center hover:opacity-90 transition-opacity"
            (click)="setEventFilter('browse')"
          >
            Browse Events
          </button>
        </div>
      </div>
      <div *ngIf="eventFilter === 'upcoming'">
        <div class="px-4">
          <div class="flex items-center justify-between px-[2px]">
            <div class="body-16SB neutral-01">My Upcoming Events</div>
            <button type="button" class="body-14SB brand-02">See all</button>
          </div>
        </div>
        <div class="mt-3">
          <div class="flex flex-col gap-3 px-4">
            <div
              class="rounded-[14px] bg-neutral-07 border border-[#f0f0f0] shadow-[0_2px_8px_rgba(0,0,0,0.04)] overflow-hidden p-2"
              *ngFor="let event of eventCards"
            >
              <div class="flex items-center gap-3 pb-2">
                <img [src]="event.image" [alt]="event.title" class="w-[80px] h-[80px] rounded-[8px] object-cover flex-shrink-0" />
                <div class="flex-1 flex flex-col gap-1">
                  <div class="body-16SB neutral-01">{{ event.title }}</div>
                  <div class="flex items-center gap-1">
                    <p-inputicon class="pi pi-map-marker neutral-03 !text-[13px]" />
                    <span class="body-12 neutral-03">{{ event.location }}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <p-inputicon class="pi pi-clock neutral-03 !text-[13px]" />
                    <span class="body-12 neutral-03">{{ event.date }}</span>
                  </div>
                </div>
                <div class="flex flex-col items-center justify-center w-[64px] bg-neutral-06 rounded-[8px] p-2">
                  <div class="body-12 neutral-03">{{ event.dayOfWeek || 'Fri' }}</div>
                  <div class="heading-h1 neutral-01">{{ event.day || '12' }}</div>
                </div>
              </div>
              <button
                type="button"
                class="w-full h-[40px] bg-brand-04 !neutral-01 !body-14SB flex items-center justify-center gap-2 !rounded-[8px] font-semibold"
              >
                <p-inputicon class="pi pi-ticket !text-[16px]" />
                View Ticket
              </button>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="eventFilter === 'browse' || 'upcoming'">
        <div class="px-4">
          <div class="flex items-center justify-between px-[2px]">
            <div class="body-16SB neutral-01">Browse events by cities</div>
            <button type="button" class="body-14SB brand-02">See all</button>
          </div>
        </div>
        <div class="mt-3">
          <div class="swiper" #swiperContainerEventByCitites>
            <div class="swiper-wrapper">
              <!-- screen 1: host and share -->
              <div class="swiper-slide first:pl-4 last:pr-4" *ngFor="let city of cityCards">
                <div
                  class="relative h-[120px] shrink-0 rounded-[12px] overflow-hidden bg-cover bg-center"
                  [ngStyle]="{ 'background-image': 'url(' + city.image + ')' }"
                >
                  <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
                  <div
                    class="absolute top-3 right-3 flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                  >
                    <p-inputicon class="pi pi-arrow-up-right text-white !text-[15px]" />
                  </div>
                  <div class="absolute bottom-3 left-3 right-3">
                    <div class="body-14SB neutral-07">{{ city.city }}</div>
                    <div class="body-12 neutral-05">{{ city.events }}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="eventFilter === 'browse' || 'upcoming'">
        <div class="px-4">
          <div class="flex items-center justify-between px-[2px]">
            <div class="body-16SB neutral-01">Events for you</div>
            <button type="button" class="body-14SB brand-02">See all</button>
          </div>
        </div>
        <div class="mt-3">
          <div class="swiper" #swiperContainerEventByYou>
            <div class="swiper-wrapper">
              <div class="swiper-slide first:pl-4 last:pr-4" *ngFor="let event of eventCards">
                <div
                  class="relative w-full h-[320px] shrink-0 rounded-[16px] overflow-hidden bg-cover bg-center"
                  [ngStyle]="{ 'background-image': 'url(' + event.image + ')' }"
                >
                  <!-- Dark Overlay at Bottom -->
                  <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>

                  <!-- Top Left: Views -->
                  <div class="absolute top-2 left-2 z-10">
                    <div
                      class="flex p-2 justify-center items-center gap-2 rounded-full border border-white/10 bg-black/20 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <div class="body-12 neutral-07">{{ event.views }}</div>
                    </div>
                  </div>

                  <!-- Top Right: Icons -->
                  <div class="absolute top-2 right-2 z-10 flex items-center gap-2">
                    <div
                      class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <p-inputicon class="pi pi-upload text-white !text-[14px]" />
                    </div>
                    <div
                      class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <p-inputicon class="pi pi-heart text-white !text-[14px]" />
                    </div>
                  </div>

                  <!-- Bottom Content -->
                  <div class="absolute bottom-0 left-0 right-0 p-2 z-10">
                    <div
                      class="flex flex-col p-2 px-3 pb-3 items-start gap-2 self-stretch rounded-xl border border-white/10 bg-[rgba(25,25,25,0.40)] backdrop-blur-sm"
                    >
                      <div class="flex flex-col gap-0.5">
                        <div class="body-16SB neutral-07">{{ event.title }}</div>
                        <div class="body-12 neutral-05">{{ event.organization }}</div>
                      </div>
                      <div class="h-[1px] w-full bg-white/10"></div>
                      <div class="flex items-start gap-1 flex-col">
                        <div class="flex items-center gap-1.5">
                          <p-inputicon class="pi pi-calendar neutral-07 !text-[12px]" />
                          <span class="body-12 neutral-05">{{ event.date }}</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                          <p-inputicon class="pi pi-map-marker neutral-07 !text-[12px]" />
                          <span class="body-12 neutral-05">{{ event.location }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="bg-neutral-06 py-3" *ngIf="eventFilter === 'browse'">
        <div class="px-4">
          <div class="flex items-center justify-between px-[2px]">
            <div class="body-16SB neutral-01">People you might know</div>
          </div>
        </div>
        <div class="mt-3">
          <div class="swiper" #swiperContainerPeople>
            <div class="swiper-wrapper">
              <div class="swiper-slide first:pl-4 last:pr-4" *ngFor="let person of peopleCards">
                <div class="bg-neutral-07 rounded-[12px] p-2 pt-3 shrink-0 w-full">
                  <div class="flex flex-col items-center gap-2">
                    <img [src]="person.profileImage" [alt]="person.name" class="w-20 h-20 rounded-full object-cover" />
                    <div class="flex flex-col items-center gap-1 w-full">
                      <div class="body-14SB neutral-01 text-center">{{ person.name }}</div>
                      <div class="flex items-center gap-1">
                        <p-inputicon class="pi pi-map-marker neutral-03 !text-[14px]" />
                        <span class="body-12 neutral-02">{{ person.location }}</span>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="w-full h-9 !rounded-[8px] bg-brand-04 neutral-01 !body-14SB flex items-center justify-center gap-1.5 hover:opacity-90 transition-opacity"
                    >
                      Add
                      <p-inputicon class="pi pi-plus !text-[14px]" />
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="px-4" *ngIf="eventFilter === 'browse'">
        <div *ngFor="let post of feedPosts" class="flex flex-col gap-3">
          <!-- Header Section: Profile Pictures and Registration Text -->
          <div class="flex items-center gap-3">
            <div class="relative flex-shrink-0">
              <img
                [src]="post.primaryUser.profileImage"
                [alt]="post.primaryUser.name"
                class="w-10 h-10 rounded-full object-cover border-2 border-neutral-07"
              />
              <div
                class="absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full bg-neutral-02 border-2 border-neutral-07 flex items-center justify-center"
              >
                <span class="body-10 neutral-07 font-medium">+{{ post.otherCount }}</span>
              </div>
            </div>
            <div class="flex-1 body-14 neutral-01">
              <span class="body-14SB neutral-01">{{ post.primaryUser.name }}</span>
              <span> and {{ post.otherCount }} others recently registered for </span>
              <span class="body-14SB neutral-01">{{ post.event.title }}</span>
            </div>
          </div>

          <!-- Event Card -->
          <div
            class="relative w-full h-[320px] rounded-[16px] overflow-hidden bg-cover bg-center"
            [ngStyle]="{ 'background-image': 'url(' + post.event.image + ')' }"
          >
            <!-- Dark Overlay at Bottom -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>

            <!-- Top Left: Views -->
            <div class="absolute top-2 left-2 z-10">
              <div
                class="flex px-2 py-1 justify-center items-center gap-2 rounded-[6px] border border-white/10 bg-black/20 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
              >
                <div class="body-12 neutral-07">{{ post.event.views }}</div>
              </div>
            </div>

            <!-- Top Right: Icons -->
            <div class="absolute top-2 right-2 z-10 flex items-center gap-2">
              <div
                class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
              >
                <p-inputicon class="pi pi-upload text-white !text-[14px]" />
              </div>
              <div
                class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
              >
                <p-inputicon class="pi pi-heart text-white !text-[14px]" />
              </div>
            </div>

            <!-- Bottom Content -->
            <div class="absolute bottom-0 left-0 right-0 p-2 z-10">
              <div
                class="flex flex-col p-2 px-3 pb-3 items-start gap-2 self-stretch rounded-xl border border-white/10 bg-[rgba(25,25,25,0.40)] backdrop-blur-sm"
              >
                <div class="flex flex-col gap-0.5">
                  <div class="body-16SB neutral-07">{{ post.event.title }}</div>
                  <div class="body-12 neutral-05">{{ post.event.organization }}</div>
                </div>
                <div class="h-[1px] w-full bg-white/10"></div>
                <div class="flex items-center gap-4 w-full">
                  <div class="flex items-center gap-1.5">
                    <p-inputicon class="pi pi-calendar neutral-07 !text-[12px]" />
                    <span class="body-12 neutral-05">{{ post.event.date }}</span>
                  </div>
                  <div class="flex items-center gap-1.5">
                    <p-inputicon class="pi pi-map-marker neutral-07 !text-[12px]" />
                    <span class="body-12 neutral-05">{{ post.event.location }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="px-4 py-3 bg-neutral-06" *ngIf="eventFilter === 'browse'">
        <div *ngFor="let suggestion of networkSuggestions" class="flex gap-4">
          <!-- Left Section: Text and Action Buttons -->
          <div class="flex-1 flex flex-col gap-3">
            <div>
              <!-- Top Text -->
              <div class="body-14 neutral-01">
                <span class="body-14SB neutral-01">{{ suggestion.name }}</span>
                <span class="neutral-03 body-14R"> recently was in</span>
              </div>

              <!-- Location and Distance -->
              <div class="flex items-center gap-2">
                <span class="body-16SB neutral-01">{{ suggestion.location }}</span>
                <div class="h-4 w-[1px] bg-neutral-04"></div>
                <span class="body-14R neutral-03">{{ suggestion.distance }}</span>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center gap-2 rounded-[12px]">
              <!-- Primary Button: Hey, let's network! -->
              <button
                type="button"
                class="flex-1 !rounded-[8px] bg-neutral-07 !border !border-[#dbdbdb] flex items-center justify-between gap-2 hover:bg-neutral-06 transition-colors !px-4 !py-2"
              >
                <span class="body-14SB" style="color: #007bfe">Hey, let's network!</span>
                <p-inputicon class="pi pi-send" style="color: #007bfe; font-size: 14px" />
              </button>

              <!-- Secondary Button: Chat -->
              <button type="button" class="w-10 h-10 !rounded-[8px] bg-brand-04 flex items-center justify-center hover:opacity-90 transition-opacity">
                <p-inputicon class="pi pi-comments neutral-01 !text-[18px]" />
              </button>
            </div>
          </div>

          <!-- Right Section: Profile Picture and Map -->
          <div class="relative w-[102px] h-[88px] rounded-[12px] overflow-hidden bg-neutral-02 flex-shrink-0">
            <!-- Map Background -->
            <div class="absolute inset-0 bg-cover bg-center" [ngStyle]="{ 'background-image': 'url(' + suggestion.mapImage + ')' }"></div>
            <div class="absolute inset-0 bg-neutral-02/70"></div>

            <!-- Profile Picture -->
            <div class="absolute inset-0 flex items-center justify-center z-10">
              <div class="relative">
                <img [src]="suggestion.profileImage" [alt]="suggestion.name" class="w-20 h-20 rounded-full object-cover border-2 border-neutral-07" />
                <!-- Time Badge on Profile Picture -->
                <div class="absolute -bottom-1 -right-1 bg-neutral-02 rounded-[6px] px-1.5 py-0.5 border border-neutral-03 shadow-sm">
                  <span class="body-10 neutral-07">{{ suggestion.timeAgo }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="eventFilter === 'browse'">
        <div class="px-4">
          <div class="flex items-center justify-between px-[2px]">
            <div class="body-16SB neutral-01">Public events</div>
            <button type="button" class="body-14SB brand-02">See all</button>
          </div>
        </div>
        <div class="mt-3">
          <div class="swiper" #swiperContainerPublicEvent>
            <div class="swiper-wrapper">
              <div class="swiper-slide first:pl-4 last:pr-4" *ngFor="let event of eventCards">
                <div
                  class="relative w-full h-[320px] shrink-0 rounded-[16px] overflow-hidden bg-cover bg-center"
                  [ngStyle]="{ 'background-image': 'url(' + event.image + ')' }"
                >
                  <!-- Dark Overlay at Bottom -->
                  <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>

                  <!-- Top Left: Views -->
                  <div class="absolute top-2 left-2 z-10">
                    <div
                      class="flex p-2 justify-center items-center gap-2 rounded-full border border-white/10 bg-black/20 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <div class="body-12 neutral-07">{{ event.views }}</div>
                    </div>
                  </div>

                  <!-- Top Right: Icons -->
                  <div class="absolute top-2 right-2 z-10 flex items-center gap-2">
                    <div
                      class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <p-inputicon class="pi pi-upload text-white !text-[14px]" />
                    </div>
                    <div
                      class="flex !w-[32px] !h-[32px] !min-w-[32px] !min-h-[32px] justify-center items-center gap-2 rounded-full border border-white/10 bg-black/10 shadow-[4px_8px_16px_0_rgba(0,0,0,0.25)] backdrop-blur-[3px]"
                    >
                      <p-inputicon class="pi pi-heart text-white !text-[14px]" />
                    </div>
                  </div>

                  <!-- Bottom Content -->
                  <div class="absolute bottom-0 left-0 right-0 p-2 z-10">
                    <div
                      class="flex flex-col p-2 px-3 pb-3 items-start gap-2 self-stretch rounded-xl border border-white/10 bg-[rgba(25,25,25,0.40)] backdrop-blur-sm"
                    >
                      <div class="flex flex-col gap-0.5">
                        <div class="body-16SB neutral-07">{{ event.title }}</div>
                        <div class="body-12 neutral-05">{{ event.organization }}</div>
                      </div>
                      <div class="h-[1px] w-full bg-white/10"></div>
                      <div class="flex items-start gap-1 flex-col">
                        <div class="flex items-center gap-1.5">
                          <p-inputicon class="pi pi-calendar neutral-07 !text-[12px]" />
                          <span class="body-12 neutral-05">{{ event.date }}</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                          <p-inputicon class="pi pi-map-marker neutral-07 !text-[12px]" />
                          <span class="body-12 neutral-05">{{ event.location }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #feed>
    <div class="flex gap-2 p-3 bg-neutral-07">
      <button
        type="button"
        class="flex-1 h-8 !rounded-full !border"
        (click)="setFeedFilter('public')"
        [ngClass]="
          feedFilter === 'public'
            ? '!border-[#e1910e] bg-brand-07 brand-02 !body-14SB font-semibold'
            : '!border-[#d7d7d7] bg-neutral-07 neutral-03 !body-14M font-medium'
        "
      >
        Public
      </button>
      <button
        type="button"
        class="flex-1 h-8 !rounded-full !border"
        (click)="setFeedFilter('networked')"
        [ngClass]="
          feedFilter === 'networked'
            ? '!border-[#e1910e] bg-brand-07 brand-02 !body-14SB font-semibold'
            : '!border-[#d7d7d7] bg-neutral-07 neutral-03 !body-14M font-medium'
        "
      >
        Networked
      </button>
    </div>
  </ng-template>
</ion-content>

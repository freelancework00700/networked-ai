@if (isLoggedIn()) {
  <ion-header mode="md">
    <ion-toolbar mode="md">
      @if (isViewingOtherUser()) {
        <div class="p-4 max-w-[672px] mx-auto grid grid-cols-[auto_1fr_auto] items-center gap-2">
          <div class="pi pi-arrow-left cursor-pointer" (click)="goBack()"></div>
          <div class="body-16SB neutral-01 text-center whitespace-nowrap overflow-hidden text-ellipsis min-w-0">{{ headerText() }}</div>
          <div></div>
        </div>
      }

      <!-- segment buttons -->
      <div class="bg-neutral-07 w-full max-w-[672px] mx-auto">
        <div class="flex gap-2 items-center p-4">
          <searchbar
            class="w-full"
            (clear)="searchQuery.set('')"
            [searchQuery]="searchQuery()"
            placeholder="Search by username"
            (searchChange)="searchQuery.set($event)"
          />

          <div class="relative">
            <app-button icon="/assets/svg/network/filterIcon.svg" color="secondary" (click)="openLocationFilterModal()" />
            @if (isFilterActive()) {
              <div class="absolute top-[-3px] right-[-3px] w-4 h-4 bg-[#F4A600] rounded-full border-2 border-white"></div>
            }
          </div>
          <app-button icon="/assets/svg/addUserIcon.svg" (click)="navigateToAddNetwork()" />
        </div>

        @if (shouldShowSegments()) {
          <div class="flex">
            <button type="button" class="segment-button" [class.active]="segmentValue() === 'list'" (click)="segmentValue.set('list')">
              <ion-icon name="list-outline" class="segment-icon" />
              <span class="segment-text">List View</span>
            </button>

            <button type="button" class="segment-button" [class.active]="segmentValue() === 'map'" (click)="segmentValue.set('map')">
              <ion-icon
                class="segment-icon"
                [src]="segmentValue() === 'map' ? 'assets/svg/network/mapThemeIcon.svg' : 'assets/svg/network/mapViewIcon.svg'"
              />
              <span class="segment-text">Map View</span>
            </button>
          </div>
        }
      </div>
    </ion-toolbar>
  </ion-header>
}

<ion-content fullscreen="true" [scrollEvents]="true">
  @if (isLoggedIn()) {
    <div class="w-full max-w-[672px] mx-auto p-4 pt-0 relative h-full">
      <div [hidden]="segmentValue() === 'map'">
        <network-list-view
          [searchQuery]="searchQuery()"
          [latitude]="latitude()"
          [longitude]="longitude()"
          [radius]="radius()"
          [userId]="userId()"
          (clearSearch)="searchQuery.set('')"
        />
      </div>
      <div [hidden]="segmentValue() === 'list' || isViewingOtherUser()">
        <network-map-view [radius]="radius()" [latitude]="latitude()" [longitude]="longitude()" />
      </div>
    </div>
  } @else {
    <auth-empty-state type="network" />
  }
</ion-content>
